# mbti_recs_app.py
import streamlit as st

# ----- 앱 설정 -----
st.set_page_config(page_title="MBTI 책·영화 추천", page_icon="📚🎬", layout="centered")

# 스타일 (간단)
st.markdown(
    """
    <style>
    .big-title { font-size:34px; font-weight:700; }
    .sub { color: #666; margin-bottom: 18px; }
    .rec-title { font-size:18px; font-weight:600; margin:6px 0; }
    .small { color: #444; font-size:14px; margin:4px 0; }
    .chip { display:inline-block; padding:6px 10px; border-radius:12px; background:#f1f3f5; margin-right:6px; }
    </style>
    """,
    unsafe_allow_html=True,
)

# ----- 데이터: MBTI -> 추천(책2, 영화2) -----
MBTI_RECS = {
    "ISTJ": {
        "books": [
            ("원칙(Principles) — 레이 달리오", "체계적 사고와 현실주의를 좋아하는 ISTJ에게 통찰 제공."),
            ("작은 습관의 힘 — 제임스 클리어", "관리형 성향에 맞는 실용적 습관 가이드.")
        ],
        "movies": [
            ("셜록 홈즈", "논리와 디테일을 좋아하는 타입에 맞는 추리물."),
            ("아웃 오브 아프리카", "차분한 서사와 성숙한 감정선이 잘 어울림.")
        ],
    },
    "ISFJ": {
        "books": [
            ("나의 하루는 4시 30분에 시작된다 — 로라 비섹", "돌봄과 책임감이 강한 ISFJ에게 공감되는 에세이."),
            ("마음의 위로가 필요할 때 읽는 책 — 다양한 에세이", "감성적 안정과 따뜻함을 주는 글들.")
        ],
        "movies": [
            ("리틀 포레스트", "소박하고 안정적인 삶의 미학이 잘 맞음."),
            ("빅 피쉬", "감정과 기억을 소중히 여기는 이야기.")
        ],
    },
    "INFJ": {
        "books": [
            ("밤의 책을 읽는 소녀 — 에밀리 스텁스", "내면 탐구와 상징적 서사가 어울림."),
            ("인간 본성에 대하여 — 오래된 철학 에세이 모음", "깊은 통찰과 의미 탐구를 자극.")
        ],
        "movies": [
            ("이터널 선샤인", "감성 깊은 서사와 심리 묘사가 잘 맞음."),
            ("히든 피겨스", "이상과 사명감을 느끼게 하는 실화 기반 드라마.")
        ],
    },
    "INTJ": {
        "books": [
            ("사피엔스 — 유발 하라리", "거시적 사고와 체계화된 관점을 즐기는 타입에 적합."),
            ("전략의 책 — 다양한 경영/전략서 요약", "논리적 계획 수립을 돕는 읽을거리.")
        ],
        "movies": [
            ("인터스텔라", "복잡한 아이디어와 구조를 좋아하는 분에게 추천."),
            ("앵커리지(혹은 유사한 SF)", "지적 호기심 자극하는 작품.")
        ],
    },
    "ISTP": {
        "books": [
            ("총, 균, 쇠 — 재레드 다이아몬드", "현상에 대한 원인 분석을 좋아하는 ISTP 성향에 잘 맞음."),
            ("도구 사용하는 뇌 — 과학 에세이", "실험적/실용적 호기심을 건드림.")
        ],
        "movies": [
            ("매드 맥스: 분노의 도로", "액션과 즉흥적 해결을 즐기는 분에게 추천."),
            ("007 시리즈", "현장감 있는 스릴과 도구 사용 묘사.")
        ],
    },
    "ISFP": {
        "books": [
            ("모리와 함께한 화요일", "감성적이고 경험을 소중히 여기는 ISFP에게 따뜻함 제공."),
            ("바람의 색", "감각적 서사와 아름다운 문장이 어울림.")
        ],
        "movies": [
            ("어바웃 타임", "일상의 감정과 소중함을 느끼기 좋은 작품."),
            ("아멜리에", "시각적 감성·소소한 기쁨을 좋아하는 타입에 적합.")
        ],
    },
    "INFP": {
        "books": [
            ("알케미스트 — 파울로 코엘료", "꿈과 의미를 탐색하는 INFP의 감성에 맞음."),
            ("작은 것들의 신 — 아룬다티 로이", "내면 서사가 풍부한 문학적 경험.")
        ],
        "movies": [
            ("월플라워", "내면의 고독과 성장 이야기를 좋아하는 분께."),
            ("이터널 선샤인", "감정의 미묘함과 기억의 서사가 잘 맞음.")
        ],
    },
    "INTP": {
        "books": [
            ("논리의 기술 — 철학/논리 입문서", "아이디어 분석과 개념적 유희를 좋아함."),
            ("코스모스 — 칼 세이건", "지적 호기심을 채우는 넓은 주제.")
        ],
        "movies": [
            ("매트릭스", "개념적 질문과 철학적 장면을 즐기는 타입."),
            ("소셜 네트워크", "아이디어와 논리로 세상을 바꾸는 이야기.")
        ],
    },
    "ESTP": {
        "books": [
            ("스토리텔링의 기술 — 실전형 가이드", "활동적이고 즉흥적인 성향에 맞는 실용서."),
            ("모험 에세이 모음", "도전과 행동을 촉진하는 읽을거리.")
        ],
        "movies": [
            ("분노의 질주 시리즈", "속도감 있고 에너지 넘치는 액션."),
            ("인셉션", "스릴과 즉각적 반응을 즐길 수 있는 작품.")
        ],
    },
    "ESFP": {
        "books": [
            ("행복의 정석 — 실용 행복 가이드", "즐거움과 사람 중심의 삶을 좋아하는 분께."),
            ("여행 에세이 모음", "경험과 순간을 즐기는 성향에 맞음.")
        ],
        "movies": [
            ("라라랜드", "감성적 즐거움과 음악, 삶의 순간을 좋아함."),
            ("프렌즈 같은 코미디 무비", "사람들과 웃고 떠들기 좋은 가벼운 영화.")
        ],
    },
    "ENFP": {
        "books": [
            ("그릿(Grit) — 안젤라 더크워스", "열정과 창의성, 끈기를 북돋아 줌."),
            ("창의력 발상법", "아이디어를 구체화하는 자극을 줌.")
        ],
        "movies": [
            ("월터의 상상은 현실이 된다", "상상과 가능성을 즐기는 분께 추천."),
            ("빅 피쉬", "이야기와 상상력을 자극하는 작품.")
        ],
    },
    "ENTP": {
        "books": [
            ("스타트업 경영 사례집", "토론과 아이디어 경쟁을 좋아하는 ENTP에 적합."),
            ("토론과 설득의 기술", "말과 아이디어로 설득하는 법을 배울 수 있음.")
        ],
        "movies": [
            ("스티브 잡스", "아이디어 충돌과 창의적 에너지를 보여줌."),
            ("더 울프 오브 월 스트리트", "빠른 페이스와 기지 발휘 장면이 많음.")
        ],
    },
    "ESTJ": {
        "books": [
            ("실행의 기술 — 조직/리더십 실전서", "구조와 실행을 중시하는 ESTJ에 추천."),
            ("시간관리의 정석", "정리·관리 능력을 더 단단하게 해줌.")
        ],
        "movies": [
            ("12인의 성난 사람들", "논리와 규칙을 중시하는 분에게 생각거리 제공."),
            ("더 퍼즐", "문제 해결과 리더십이 드러나는 드라마.")
        ],
    },
    "ESFJ": {
        "books": [
            ("사람을 움직이는 법 — 대인관계 실전서", "사교적이고 배려심 강한 ESFJ에 유용."),
            ("따뜻한 인간관계 에세이", "관계 중심의 삶에 공감과 팁을 줌.")
        ],
        "movies": [
            ("셜록(현대물) 혹은 휴먼 드라마", "타인과의 관계를 중심으로 한 드라마가 어울림."),
            ("원스", "음악과 사람의 연결을 따뜻하게 그린 작품.")
        ],
    },
    "ENFJ": {
        "books": [
            ("리더의 글쓰기 — 영향력 있는 메시지 만들기", "영향력과 공감을 동시에 키우고 싶은 분께."),
            ("사회적 리더십 사례집", "사람을 이끄는 이야기와 팁 제공.")
        ],
        "movies": [
            ("굿 윌 헌팅", "사람의 성장과 소통, 공감에 초점이 맞춰짐."),
            ("모두를 위한 리더의 이야기", "영감을 주는 실화 기반 드라마.")
        ],
    },
    "ENTJ": {
        "books": [
            ("하드씽(창업 경영) — 벤 호로위츠", "전략과 실행을 동시에 생각하는 리더형에 추천."),
            ("전략적 사고 연습", "시스템적으로 문제를 해결하는 데 도움됨.")
        ],
        "movies": [
            ("소셜 네트워크", "야망과 전략, 실행의 이야기가 많음."),
            ("머니볼", "데이터 기반 의사결정과 리더십을 보여줌.")
        ],
    },
}

# ----- UI -----
st.markdown('<div class="big-title">MBTI별 책·영화 추천 📚🎬</div>', unsafe_allow_html=True)
st.markdown('<div class="sub">원하는 MBTI를 골라줘. 그 유형에 잘 맞는 책 2권과 영화 2편을 추천해줄게 — 짧은 이유도 같이!</div>', unsafe_allow_html=True)

mbti_list = list(MBTI_RECS.keys())
selected = st.selectbox("MBTI 선택", options=mbti_list, index=0)

# show
rec = MBTI_RECS[selected]

st.markdown(f"### {selected}님을 위한 추천 { '⭐' }")
st.write("")  # spacer

# 두 칸 레이아웃: 책 / 영화
col1, col2 = st.columns([1, 1])

with col1:
    st.markdown('<div class="rec-title">추천 책 📘</div>', unsafe_allow_html=True)
    for title, reason in rec["books"]:
        st.markdown(f"<div class='chip'>📖</div> **{title}**  \n<span class='small'>{reason}</span>", unsafe_allow_html=True)

with col2:
    st.markdown('<div class="rec-title">추천 영화 🎞️</div>', unsafe_allow_html=True)
    for title, reason in rec["movies"]:
        st.markdown(f"<div class='chip'>🎬</div> **{title}**  \n<span class='small'>{reason}</span>", unsafe_allow_html=True)

st.markdown("---")
st.markdown("**한줄 팁:** 책은 가볍게 미리보기(목차/첫장)로 분위기를 확인해보고, 영화는 예고편이나 줄거리로 관심도 체크해봐 😊", unsafe_allow_html=True)
st.markdown("앱 사용 중 아이디어나 수정하고 싶은 추천이 있으면 알려줘 — 더 맞춰줄게! ⭐")

# footer
st.markdown("<div style='color:#777; font-size:12px; margin-top:8px;'>이 앱은 추가 라이브러리 없이 Streamlit만으로 작성되었습니다.</div>", unsafe_allow_html=True)
